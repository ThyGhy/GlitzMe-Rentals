<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery - GlitzME Rentals</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/webp" sizes="32x32" href="{{ url_for('static', filename='Images/Logos/GMLogo-mobile.webp') }}">
    <link rel="icon" type="image/webp" sizes="16x16" href="{{ url_for('static', filename='Images/Logos/GMLogo-mobile.webp') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='Images/Logos/GMLogo-mobile.webp') }}">
    <link rel="shortcut icon" href="{{ url_for('static', filename='Images/Logos/GMLogo-mobile.webp') }}">
    
    <!-- Preload navigation logo for performance -->
    <link rel="preload" as="image" href="{{ url_for('static', filename='Images/Logos/GMLogo-mobile.webp') }}" media="(max-width: 768px)">
    <link rel="preload" as="image" href="{{ url_for('static', filename='Images/Logos/GMLogo-optimized.webp') }}" media="(min-width: 769px)">
    
    <!-- Responsive CSS Loading - Mobile for small screens and portrait orientation -->
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/mobile.css') }}" media="screen and (max-width: 768px), screen and (max-height: 600px)">
    <!-- Desktop CSS for larger screens and landscape orientation -->
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/desktop.css') }}" media="screen and (min-width: 769px) and (min-height: 601px)">
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="{{ url_for('static', filename='Images/Logos/GMLogo-optimized.webp') }}" 
                     srcset="{{ url_for('static', filename='Images/Logos/GMLogo-mobile.webp') }} 768w, 
                             {{ url_for('static', filename='Images/Logos/GMLogo-optimized.webp') }} 1200w"
                     sizes="(max-width: 768px) 50px, 90px"
                     alt="GlitzME Rentals"
                     loading="eager"
                     fetchpriority="high">
            </div>
            <ul class="nav-menu">
                <li><a href="{{ url_for('index') }}">Home</a></li>
                <li><a href="{{ url_for('rentals') }}">Rentals</a></li>
                <li><a href="{{ url_for('packages') }}">Packages</a></li>
                <li><a href="{{ url_for('about') }}">About</a></li>
                <li><a href="{{ url_for('gallery') }}" class="active">Gallery</a></li>
                <li><a href="{{ url_for('contact_page') }}">Contact</a></li>
            </ul>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Gallery Section -->
    <section id="gallery" class="gallery" role="region" aria-label="Gallery">
        <div class="container">
            <div class="section-header">
                <h1>Gallery</h1>
                <p>See our rentals and experiences in action!</p>
            </div>
            <div class="gallery-container">
                <!-- Image Gallery -->
                <div class="image-gallery">
                    <h2>Event Photos</h2>
                    <div class="gallery-grid">
                        {% for photo in photos %}
                        <div class="gallery-item" 
                             role="button"
                             tabindex="0"
                             data-image="{{ url_for('static', filename='Images/EventPhotos/' + photo) }}"
                             data-alt="Photo {{ loop.index }} of a GlitzME Rentals event"
                             aria-label="Click or press Enter to view larger image">
                            <img src="{{ url_for('static', filename='Images/EventPhotos/' + photo) }}" 
                                 alt="Photo {{ loop.index }} of a GlitzME Rentals event" 
                                 loading="lazy"
                                 class="gallery-image">
                            <div class="image-hint" role="tooltip">Click to enlarge</div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- Video Gallery -->
                <div class="video-gallery" role="region" aria-label="Customer Testimonials">
                    <h2>Customer Testimonials</h2>
                    <p class="testimonial-intro">Hear what our happy customers have to say about their experience with GlitzME Rentals</p>
                    
                    <div class="testimonial-carousel">
                        <button class="carousel-nav-btn prev" aria-label="Previous testimonial">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        
                        <div class="carousel-container">
                                <div class="carousel-track">
                                {% for video in ['Testimonial1.mp4', 'Testimonial2.mp4', 'Testimonial3.mp4', 'Testimonial4.mp4', 'Testimonial5.mp4', 'Testimonial6.mp4'] %}
                                <div class="carousel-slide{% if loop.first %} active{% endif %}" data-index="{{ loop.index0 }}">
                                        <div class="video-wrapper">
                                            <video controls 
                                                   poster="{{ url_for('static', filename='Images/testimonial-poster.jpg') }}" 
                                                   aria-label="Customer testimonial video"
                                                   preload="metadata">
                                            <source src="{{ url_for('static', filename='Testimonials/' + video) }}" type="video/mp4">
                                                <track 
                                                    kind="captions" 
                                                    label="English" 
                                                    src="{{ url_for('static', filename='Captions/' + video.replace('.mp4', '.vtt')) }}" 
                                                    srclang="en" 
                                                    default>
                                                <p>Your browser doesn't support HTML5 video. Here is a 
                                                <a href="{{ url_for('static', filename='Testimonials/' + video) }}">link to the video</a> 
                                                    and its 
                                                    <a href="{{ url_for('static', filename='Captions/' + video.replace('.mp4', '.vtt')) }}">transcript</a>.
                                                </p>
                                            </video>
                                            <button type="button" 
                                                    class="transcript-btn" 
                                                    onclick="openTranscript('{{ video }}')"
                                                    aria-label="View transcript for testimonial video">
                                                View Transcript
                                            </button>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>

                        <button class="carousel-nav-btn next" aria-label="Next testimonial">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>

                    <!-- Mobile Navigation Controls for Testimonials -->
                    <div class="mobile-carousel-controls">
                        <div class="mobile-carousel-nav">
                            <button class="carousel-nav-btn prev" aria-label="Previous testimonial">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="carousel-nav-btn next" aria-label="Next testimonial">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <div class="carousel-dots" role="tablist" aria-label="Testimonial navigation">
                            {% for i in range(6) %}
                            <button class="carousel-dot{% if loop.first %} active{% endif %}" 
                                    data-index="{{ loop.index0 }}"
                                    role="tab"
                                    aria-label="Show testimonial {{ loop.index }}"
                                    aria-selected="{{ 'true' if loop.first else 'false' }}">
                            </button>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Desktop Dots (hidden on mobile) -->
                    <div class="carousel-dots desktop-dots" role="tablist" aria-label="Testimonial navigation">
                        {% for i in range(6) %}
                        <button class="carousel-dot{% if loop.first %} active{% endif %}" 
                                data-index="{{ loop.index0 }}"
                                role="tab"
                                aria-label="Show testimonial {{ loop.index }}"
                                aria-selected="{{ 'true' if loop.first else 'false' }}">
                                            </button>
                                    {% endfor %}
                    </div>
                </div>

                <!-- Event Videos Gallery -->
                <div class="video-gallery" role="region" aria-label="Event Videos">
                    <h2>Event Videos</h2>
                    <p class="testimonial-intro">See our amazing events and party setups in action</p>
                    
                    <div class="testimonial-carousel event-videos-carousel">
                        <button class="carousel-nav-btn prev" aria-label="Previous event video">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        
                        <div class="carousel-container">
                                <div class="carousel-track">
                                {% for video in ['PromoVideo1.mp4', 'PromoVideo2.mp4'] %}
                                <div class="carousel-slide{% if loop.first %} active{% endif %}" data-index="{{ loop.index0 }}">
                                        <div class="video-wrapper">
                                            <video controls 
                                                   poster="{{ url_for('static', filename='Images/testimonial-poster.jpg') }}" 
                                                   aria-label="Event promotional video"
                                                   preload="metadata">
                                            <source src="{{ url_for('static', filename='EventVideos/' + video) }}" type="video/mp4">
                                                <p>Your browser doesn't support HTML5 video. Here is a 
                                                <a href="{{ url_for('static', filename='EventVideos/' + video) }}">link to the video</a>.
                                                </p>
                                            </video>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>

                        <button class="carousel-nav-btn next" aria-label="Next event video">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>

                    <!-- Mobile Navigation Controls for Event Videos -->
                    <div class="mobile-carousel-controls">
                        <div class="mobile-carousel-nav">
                            <button class="carousel-nav-btn prev" aria-label="Previous event video">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="carousel-nav-btn next" aria-label="Next event video">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <div class="carousel-dots" role="tablist" aria-label="Event video navigation">
                            {% for i in range(2) %}
                            <button class="carousel-dot{% if loop.first %} active{% endif %}" 
                                    data-index="{{ loop.index0 }}"
                                    role="tab"
                                    aria-label="Show event video {{ loop.index }}"
                                    aria-selected="{{ 'true' if loop.first else 'false' }}">
                            </button>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Desktop Dots (hidden on mobile) -->
                    <div class="carousel-dots desktop-dots" role="tablist" aria-label="Event video navigation">
                        {% for i in range(2) %}
                        <button class="carousel-dot{% if loop.first %} active{% endif %}" 
                                data-index="{{ loop.index0 }}"
                                role="tab"
                                aria-label="Show event video {{ loop.index }}"
                                aria-selected="{{ 'true' if loop.first else 'false' }}">
                                            </button>
                                    {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Image Modal -->
    <div class="image-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-label="Image preview">
        <div class="modal-overlay" tabindex="-1"></div>
        <div class="modal-content" role="document">
            <img src="" alt="" class="modal-image">
            <button class="modal-close" aria-label="Close image preview">&times;</button>
        </div>
    </div>

    <!-- Transcript Modal -->
    <div id="transcriptModal" class="transcript-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-label="Video transcript">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <button type="button" class="modal-close" onclick="closeTranscript()" aria-label="Close transcript">&times;</button>
            <div class="transcript-content">
                <h3>Video Transcript</h3>
                <div id="transcript-text"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section quick-links">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="{{ url_for('rentals') }}">Rentals</a></li>
                        <li><a href="{{ url_for('packages') }}">Package Deals</a></li>
                        <li><a href="{{ url_for('about') }}">About Us</a></li>
                        <li><a href="{{ url_for('contact_page') }}">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section rentals-info">
                    <h3>GlitzME Rentals</h3>
                    <p>Local Family Owned party rental business serving the Las Vegas Valley. Creating memorable experiences with exceptional customer service - there's no other way but the GlitzME WAY!</p>
                    <div class="social-links">
                        <a href="https://www.instagram.com/glitzme_rentals/" target="_blank" rel="noopener noreferrer" class="instagram-link">
                            <i class="fab fa-instagram"></i>
                            <span>Follow Us on Instagram!</span>
                        </a>
                    </div>
                </div>
                <div class="footer-section social">
                    <h3>Contact Info</h3>
                    <ul>
                        <li>(702) 344-4717</li>
                        <li>(702) 622-0425</li>
                        <li>Glitzme.rentals21@gmail.com</li>
                        <li>Las Vegas, NV</li>
                        <li>Family Owned & Operated</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Glitzme LLC. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- External JavaScript -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Transcript data from SRT files
            const transcripts = {
                'Testimonial1.mp4': `Okay, listen, let me tell y'all something.
It is a little after 11 o'clock.
My event, 11 p.m.
My event is tomorrow at 7:30.
Raven came through, like, listen.
I'm gonna get these to you tonight
so you can be set up on time in the morning
because if you know me, I do not like giving up
at me in no time, but Raven came through
with the chairs and tables.
We are hosting my first ECW class tomorrow.
So if you're interested, let us know.
But if you also look at the tables and chairs
and all things, Raven got you
and we'll get you all the way together, okay?`,

                'Testimonial2.mp4': `What's up guys, had the opportunity to team up with GlitzME Rentals, great place, great
people, had the opportunity to, for them to drop off the item, use it in my party, people
loved it.
So check them out, they're a great, great team and they have great prices.
So by all means, guys, look up on IG and any other platform, GlitzME Rentals, thanks
guys, See Yall Later!`,

                'Testimonial3.mp4': `It's my 21st and we rented from GlitzME Rentals, thank y'all so much for coming out.
They came out and delivered to chairs and tables, I'm very grateful.
Appreciate y'all.`,

                'Testimonial4.mp4': `Hey y'all, we just wanted to say hey,
to GlitzME Rentals, big shoutout to them,
renting some tables and chairs for my son's 21st birthday party,
she told me to be camera ready and I'm like,
I woke up like this,
it's what you get, girl, I love you.`,

                'Testimonial5.mp4': `What's going on all y'all? My name is Brandon Marshall. I rented from GlitzME Rentals for
my daughter's birthday party. It was amazing. She had a blast. I got the tables, the chairs,
and the bounce house. All the kids had a good time and so you know I would 100% recommend
you rent from GlitzME. I would do it again. I've done it multiple times. Actually this
is the first time that I'm actually doing a review for her. But I've done it multiple times.
The services are immaculate. It's great. So y'all rent from GlitzME Rentals.`,

                'Testimonial6.mp4': `Hi, my name is Ernest Mitchell, this is Nicole Mitchell, We rented from GltizME Rentals
and the spirits fabulous. The Kids Enjoy themselves
their bouncing up the yin-yang, we have a fabulous time
please, if you feel free, rent from them and you'll be satisfied!`
            };

            // Make functions globally available
            window.openTranscript = function(videoFile) {
                const modal = document.getElementById('transcriptModal');
                const transcriptText = document.getElementById('transcript-text');
                
                if (modal && transcriptText) {
                    transcriptText.textContent = transcripts[videoFile];
                    modal.style.display = 'flex';
                    document.body.style.overflow = 'hidden';

                    // Focus the close button
                    const closeButton = modal.querySelector('.modal-close');
                    if (closeButton) {
                        closeButton.focus();
                    }
                }
            };

            window.closeTranscript = function() {
                const modal = document.getElementById('transcriptModal');
                if (modal) {
                    modal.style.display = 'none';
                    document.body.style.overflow = '';
                }
            };

            // Close modal when clicking overlay
            const modalOverlay = document.querySelector('.modal-overlay');
            if (modalOverlay) {
                modalOverlay.addEventListener('click', closeTranscript);
            }

            // Close modal on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeTranscript();
                }
            });

            // Ensure modal is hidden by default
            const modal = document.getElementById('transcriptModal');
            if (modal) {
                modal.style.display = 'none';
            }

            // Image Modal Management
            let lastFocusedImageElement = null;

            function openImageModal(src, alt) {
                const modal = document.querySelector('.image-modal');
                const modalImage = modal.querySelector('.modal-image');
                const closeButton = modal.querySelector('.modal-close');
                
                lastFocusedImageElement = document.activeElement;
                
                modalImage.src = src;
                modalImage.alt = alt;
                modal.classList.add('active');
                modal.setAttribute('aria-hidden', 'false');
                document.body.style.overflow = 'hidden';
                
                closeButton.focus();
                
                // Add event listeners
                modal.addEventListener('keydown', handleImageModalKeyboard);
                closeButton.addEventListener('click', closeImageModal);
                modal.querySelector('.modal-overlay').addEventListener('click', closeImageModal);
            }

            function closeImageModal() {
                const modal = document.querySelector('.image-modal');
                modal.classList.remove('active');
                modal.setAttribute('aria-hidden', 'true');
                document.body.style.overflow = '';
                
                // Remove event listeners
                modal.removeEventListener('keydown', handleImageModalKeyboard);
                
                // Return focus
                if (lastFocusedImageElement) {
                    lastFocusedImageElement.focus();
                }
            }

            function handleImageModalKeyboard(e) {
                if (e.key === 'Escape') {
                    e.preventDefault();
                    closeImageModal();
                    return;
                }

                if (e.key === 'Tab') {
                    const modal = document.querySelector('.image-modal');
                    const focusableElements = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
                    const firstFocusable = focusableElements[0];
                    const lastFocusable = focusableElements[focusableElements.length - 1];

                    if (e.shiftKey) {
                        if (document.activeElement === firstFocusable) {
                            e.preventDefault();
                            lastFocusable.focus();
                        }
                    } else {
                        if (document.activeElement === lastFocusable) {
                            e.preventDefault();
                            firstFocusable.focus();
                        }
                    }
                }
            }

            // Set up gallery item event listeners
            document.querySelectorAll('.gallery-item').forEach(item => {
                item.addEventListener('click', function() {
                    openImageModal(this.dataset.image, this.dataset.alt);
                });

                item.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        openImageModal(this.dataset.image, this.dataset.alt);
                    }
                });
            });

            // Initialize video descriptions for screen readers
            document.querySelectorAll('video').forEach(video => {
                // Add audio description track if available
                const descriptionTrack = document.createElement('track');
                descriptionTrack.kind = 'descriptions';
                descriptionTrack.label = 'Audio Descriptions';
                descriptionTrack.srclang = 'en';
                
                // Set up video controls accessibility
                video.addEventListener('play', function() {
                    this.setAttribute('aria-label', 'Playing: Customer testimonial video');
                });
                
                video.addEventListener('pause', function() {
                    this.setAttribute('aria-label', 'Paused: Customer testimonial video');
                });
                
                // Ensure captions are enabled by default
                video.textTracks[0].mode = 'showing';
            });
        });
    </script>
</body>
</html> 